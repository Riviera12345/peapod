<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>peapod: peapod - EAPOL Proxy Daemon</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">peapod
   &#160;<span id="projectnumber">0.1.0</span>
   </div>
   <div id="projectbrief">EAPOL Proxy Daemon</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">peapod - EAPOL Proxy Daemon </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><ul>
<li><a href="#overview">Overview</a><ul>
<li><a href="#eapoleap-classification-filtering-and-script-execution">EAPOL/EAP classification, filtering, and script execution</a></li>
<li><a href="#vlan-priority-tag-handling">VLAN priority tag handling</a></li>
<li><a href="#mac-spoofing">MAC spoofing</a></li>
</ul>
</li>
<li><a href="#getting-started">Getting started</a><ul>
<li><a href="#documentation">Documentation</a><ul>
<li><a href="#manual-pages">Manual pages</a></li>
<li><a href="#source-code-documentation">Source code documentation</a></li>
</ul>
</li>
<li><a href="#installation">Installation</a><ul>
<li><a href="#apt">apt</a></li>
<li><a href="#rpm">rpm</a></li>
<li><a href="#sources">Sources</a></li>
</ul>
</li>
<li><a href="#configuration">Configuration</a><ul>
<li><a href="#bare-minimum">Bare minimum</a></li>
<li><a href="#anything-more">Anything more</a></li>
</ul>
</li>
<li><a href="#usage">Usage</a></li>
</ul>
</li>
<li><a href="#building-from-source">Building from source</a><ul>
<li><a href="#executable-man-pages-examples-and-systemd-unit-file">Executable, man pages, examples, and systemd unit file</a><ul>
<li><a href="#build-and-install">Build and install</a></li>
<li><a href="#clean-and-uninstall">Clean and uninstall</a></li>
</ul>
</li>
<li><a href="#source-code-documentation-1">Source code documentation</a><ul>
<li><a href="#build">Build</a></li>
<li><a href="#clean">Clean</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#legal">Legal</a></li>
</ul>
<h2>Overview</h2>
<p><b>peapod</b> is a daemon that proxies <b>IEEE 802.1X Extensible Authentication Protocol over LAN (EAPOL)</b> packets between Ethernet interfaces. It supports a few tricks on a per-interface basis, so it may be considered a (highly) rudimentary general-purpose transparent bridging firewall/rewriting proxy for EAPOL.</p>
<p><b>EAPOL</b> is a <b>port-based network access control (PNAC)</b> mechanism ensuring that only authorized devices are allowed to use a network. In a nutshell, EAPOL blocks regular network traffic, such as TCP/IP, from traversing the physical port (e.g. on a switch) to which a client is connected until the client successfully authenticates.</p>
<p>"EAPOL packet" in this sense is an Ethernet frame with the EAPOL EtherType of <b>0x888e</b> encapsulating either an EAP packet or certain EAPOL control messages.</p>
<p>Abilities surpassing those of a simple proxy include:</p>
<h3>EAPOL/EAP classification, filtering, and script execution</h3>
<p><b>Proxy only certain kinds of packets</b> between certain interfaces and <b>execute user-defined scripts</b> when proxying recognized packet types. This is supported for the nine EAPOL Packet Types defined by IEEE Std 802.1X-2010 and the four EAP Codes defined by IETF RFC 2284. </p><h3>VLAN priority tag handling</h3>
<p><b>Add, modify, or remove priority tags</b> in proxied EAPOL packets. (In fact, more than just the Priority Code Point field in the 802.1Q tag may be manipulated.) </p><h3>MAC spoofing</h3>
<p>Change interface MAC addresses to a <b>user-defined address</b>, or to the <b>address of an actual supplicant</b> behind the proxy learned during runtime. This enables the device running <b>peapod</b> to masquerade as the supplicant and originate what appears to be authorized network traffic once the supplicant establishes an EAPOL session (as long as MACsec is not in use).</p>
<h2>Getting started</h2>
<h3>Documentation</h3>
<h4>Manual pages</h4>
<p>HTML versions: <a href="http://kangtastic.github.io/peapod/peapod.8.html"><b>peapod</b>(8)</a>, <a href="http://kangtastic.github.io/peapod/peapod.conf.5.html"><b>peapod.conf</b>(5)</a>. </p><h4>Source code documentation</h4>
<p>HTML version <a href="https://kangtastic.github.io/peapod/html/index.html">here</a> (generated with <code>doxygen</code>). </p><h3>Installation</h3>
<p>Install the <a href="https://github.com/kangtastic/peapod/releases">latest release</a> for your system. 64-bit builds are also provided for the most popular Linux distributions. </p><h4>apt</h4>
<p>Debian, Ubuntu, et al.: </p><pre class="fragment">$ wget -qO - https://kangtastic.github.io/peapod/pubkey.gpg | sudo apt-key add -
$ sudo apt-get install apt-transport-https
$ echo "deb https://kangtastic.github.io/peapod/apt amd64/" | sudo tee /etc/apt/sources.list.d/peapod.list
$ sudo apt-get update
$ sudo apt-get install peapod
</pre><h4>rpm</h4>
<p>RHEL, CentOS et al.: </p><pre class="fragment">$ sudo rpm -v --import https://kangtastic.github.io/peapod/pubkey.gpg
$ sudo yum-config-manager --add-repo https://kangtastic.github.io/peapod/rpm/x86_64/peapod.repo
$ sudo yum install peapod
</pre><p>Fedora et al.: </p><pre class="fragment">$ sudo rpm -v --import https://kangtastic.github.io/peapod/pubkey.gpg
$ sudo dnf config-manager --add-repo https://kangtastic.github.io/peapod/rpm/x86_64/peapod.repo
$ sudo dnf install peapod
</pre><h4>Sources</h4>
<p>See "[Building from source](#building-from-source)."</p>
<h3>Configuration</h3>
<h4>Bare minimum</h4>
<p>Place a config file at <code>/etc/peapod.conf</code>, e.g.: </p><pre class="fragment">iface eth0;
iface eth1;
</pre><p>This is the minimum required config and silently proxies all EAPOL packets between <b>eth0</b> and <b>eth1</b>.</p>
<h4>Anything more</h4>
<p>See the manual pages for much more extensive documentation.</p>
<h3>Usage</h3>
<p>Start <b>peapod</b>: </p><pre class="fragment">$ sudo systemctl start peapod
</pre><p>Logs are saved to <code>/var/log/peapod.log</code> by default.</p>
<p>It may be helpful to refer to the log during initial setup to verify that <b>peapod</b> is doing its job. Log verbosity can be controlled by adding the following to the beginning of the config file: </p><pre class="fragment">verbosity N;
</pre><p>Here, <code>N</code> is 0, 1, 2, or 3. Verbosity is 0 by default.</p>
<p>Once everything is working properly, tell <code>systemd</code> to start <b>peapod</b> at boot: </p><pre class="fragment">$ sudo systemctl enable peapod
</pre><h2>Building from source</h2>
<p>Prerequisites: recent-ish versions of Linux, <code>systemd</code> as the service manager, <code>bison</code>, <code>flex</code>, <code>pkg-control</code>, and, of course, <code>gcc</code> or similar.</p>
<h3>Executable, man pages, examples, and systemd unit file</h3>
<h4>Build and install</h4>
<pre class="fragment">$ make
$ sudo make install
</pre><h4>Clean and uninstall</h4>
<pre class="fragment">$ make clean
$ sudo make uninstall
</pre><h3>Source code documentation</h3>
<p>Prerequisite: a recent-ish version of <code>doxygen</code>.</p>
<h4>Build</h4>
<pre class="fragment">$ make html
</pre><p>Also cleans any compiled files and existing source code documentation. The results will look like <a href="https://kangtastic.github.io/peapod/html/index.html">these</a> and are at <code>html/index.html</code> in the program sources.</p>
<h4>Clean</h4>
<pre class="fragment">$ make cleanhtml
</pre><h2>Legal</h2>
<p>This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.</p>
<p>This package is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</p>
<p>You should have received a copy of the GNU General Public License along with this program. If not, see <a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
